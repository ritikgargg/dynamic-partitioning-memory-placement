# Dynamic Partitioning based Memory Placement

### 1. What does this program do?

The program aims at simulating the scenario of multiple requests arriving at a specific rate in the system and requesting to run processes with their respective duration of execution and memory requirements for the same. Through this assignment, we aim at investigating the relative effectiveness of different memory placement techniques viz. first-fit, best-fit, and next-fit algorithms for dynamic partitioning. The relative performance of these algorithms is measured on the basis of metrics like memory utilization and average turnaround times.

### 2. How this program works?

The required inputs for the execution of the program are supplied as the command-line arguments. These include the values of parameters `p, q, n, m, t, T` (total execution time) and the choice of memory placement algorithms from first-fir, best-fit and next-fit. Then using the value of n, we calculate the value of the process arrival rate.

We set up a function `sig_handler()` responsible for addressing the termination of the program, producing meaningful results, when either the time-allowed has expired(`SIGALRM` generated by `alarm()`) or a signal indicating termination by the user(`SIGINT`) is received.

Next, we invoke the `createThread()` function to create a thread responsible for the generation of the process requests and another thread responsible for allocating the required memory to these requests in an FCFS manner.

The `req_producer_thr()` function simulates the execution of the producer thread, responsible for adding requests to the queue. This addition of requests takes place at a rate of `r`(process arrival rate), which is obtained as per the instructions in the assignment. For each request generated, a node is added dynamically to the rear end of the queue.

The `memory_allocator_thr()` is responsible for simulating the task of memory allocation to the processes in the request queue. This allocation takes place in an FCFS(first-come, first-serve) fashion. We wait on the conditional variable `cond_queue` if the queue is empty(no requests to be processed). If the queue is non-empty, we use one of the memory-placement algorithms from first-fit, best-fit, and next-fit, based on the choice of the user. These algorithms are executed by invoking the `allocate_using_first_fit()`, `allocate_using_best_fit()`, and `allocate_using_next_fit()` functions respectively. 

Once we allocate the required memory space, essential for the execution of the request at the front of the queue, we create a separate thread for this request in order to simulate the execution of the process indicated by the request.  For this purpose, we invoke the `process_execution_simulator()` function, wherein the `sleep()` function is added for a time interval given by the program duration, after which the allocated memory is released by the process. 

Finally, we calculate the percentage memory utilization and the average turnaround time, obtained by following a particular memory allocation algorithm. The program terminates when either a `SIGALRM` or `SIGINT` signal gets generated.

### 3. How to compile and run this program?

&nbsp;&nbsp;&nbsp;&nbsp;To compile the program:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`gcc main.c -lpthread -lm`

&nbsp;&nbsp;&nbsp;&nbsp;To execute the program:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`./a.out p q n m t T choice`

&nbsp;&nbsp;&nbsp;&nbsp;where,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`p` = Total physical memory(in MB) in the simulation.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`q` = Memory(in MB) reserved for the operating system.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`n` = Parameter to determine the process arrival rate.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`m` = Parameter to determine the size of the process in a request.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`t` = Parameter to determine the duration of the process in a request.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`T` = The time(in seconds) after which the simulation should end.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`choice` = A number from 1, 2 or 3, denoting one of the following memory placement algorithms:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1. First-fit.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2. Best-fit.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3. Next-fit.


**Commands for a sample run**

```  
gcc main.c -lpthread -lm
./a.out 1000 200 10 10 10 200 1
``` 